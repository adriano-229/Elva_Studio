<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layoutSocio :: layout(~{::content})}">
  <div th:fragment="content">
    <div class="content-wrapper">
      <div class="row justify-content-center">
        <div class="col-12 col-md-10 col-lg-18">

          <!-- Header -->
          <div class="text-center mb-4">
            <h3 class="mb-2 fw-bold">Realizar Pago</h3>
            <p class="text-muted mb-0">Estas a punto de pagar</p>
          </div>

          <!-- Card principal -->
          <div class="card w-100 h-auto shadow-sm border-primary">
            <div class="card-body">

              <!-- Datos del socio -->
              <div class="card mb-3 p-3 bg-light border rounded shadow-sm w-100">
                <div class="d-flex flex-column gap-2">
                  <span class="small"><strong>Nro de socio:</strong> <span th:text="${socio.numeroSocio}">NroSocio</span></span>
                  <span class="small"><strong>Nombre:</strong> <span th:text="${socio.nombre}">Nombre</span></span>
                  <span class="small"><strong>Apellido:</strong> <span th:text="${socio.apellido}">Apellido</span></span>
                  <span class="small"><strong>DNI:</strong> <span th:text="${socio.numeroDocumento}">DNI</span></span>
                  <span class="small"><strong>Correo Electronico:</strong> <span th:text="${socio.correoElectronico}">Correo</span></span>
                  <span class="small"><strong>Telefono:</strong> <span th:text="${socio.telefono}">Telefono</span></span>
                </div>
              </div>

              <!-- Formulario de pago -->
              <form th:action="@{/pagos/confirmarDatos}" th:object="${deudaForm}" method="post">

                <!-- Tabla de cuotas -->
				<div class="card mb-3 shadow-sm border-0" style="border-radius: 1rem;">
				  <div class="card-header text-primary fw-bold bg-white" 
				       style="border-bottom: 2px solid #0d6efd; border-radius: 1rem 1rem 0 0;">
				    <i class="bi bi-receipt-cutoff me-2"></i> Detalle de Cuotas
				  </div>
                  <div class="table-responsive mt-2">
                    <table class="table table-striped table-hover w-100">
                      <thead class="table-light">
                        <tr>
                          <th>Mes-Año</th>
                          <th>Fecha Vencimiento</th>
                          <th>Valor</th>
                        </tr>
                      </thead>
                      <tbody>
                        <input type="hidden" th:field="*{idCuotas}"/>
                        <tr th:each="cuota : ${cuotasAPagar}">
                          <td th:text="${cuota.mes} + '-' + ${cuota.anio}"></td>
                          <td th:text="${cuota.fechaVencimiento}"></td>
                          <td th:text="${cuota.valorCuota.valorCuota}"></td>
                        </tr>
                        <tr>
                          <input type="hidden" th:field="*{idSocio}"/>
                          <input type="hidden" th:field="*{totalAPagar}"/>
                          <td colspan="2"><strong>Total a pagar:</strong></td>
                          <td class="fw-bold" th:text="${totalAPagar}">0.00</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <!-- Selección de forma de pago -->
                <div class="mb-3 text-center">
                  <label for="formaPago" class="form-label small"><strong>Forma de Pago:</strong></label>
                  <select th:field="*{formaPago}" class="form-select w-auto d-inline-block" required>
                    <option value="">Seleccione una forma de pago</option>
                    <option th:each="tipo : ${tiposPago}" th:value="${tipo}" th:text="${tipo}"></option>
                  </select>
                </div>

                <!-- Botones -->
                <div class="d-flex justify-content-between mt-4">
                  <a class="btn btn-secondary" th:href="@{/cuotas/adeudadas}">
                    <i class="bi bi-arrow-left me-1"></i> Volver a Cuotas
                  </a>
                  <button type="submit" class="btn btn-success">
                    <i class="bi bi-check-circle me-1"></i> Confirmar
                  </button>
                </div>

              </form>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</html>
