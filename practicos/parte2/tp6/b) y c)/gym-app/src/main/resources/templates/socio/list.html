<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{::content})}">
<div th:fragment="content">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3 mb-0"><i class="bi bi-people me-2"></i>Gestión de Socios</h1>
    <a class="btn btn-primary" th:href="@{/admin/socios/nuevo}">Nuevo</a>
  </div>

  <form class="row g-2 mb-3">
    <div class="col-md-4">
      <input type="text" class="form-control" name="q" placeholder="Buscar por nombre/apellido/DNI" th:value="${q}">
    </div>
    <div class="col-auto">
      <button class="btn btn-outline-secondary">Buscar</button>
    </div>
  </form>

  <div class="table-responsive">
    <table class="table table-striped">
    <thead>
      <tr><th>#Socio</th><th>Apellido, Nombre</th><th>Documento</th><th>Usuario</th><th>Sucursal</th><th>Telefono</th><th>Email</th><th></th></tr>
    </thead>
    <tbody>
      <tr th:each="s : ${socios.content}">
        <td th:text="${s.numeroSocio}"></td>
        <td th:text="|${s.apellido}, ${s.nombre}|"></td>
        <td th:text="${s.numeroDocumento}"></td>
        <td th:text="${s.nombreUsuario}"></td>
        <td th:text="${s.sucursalNombre}"></td>
        <td th:text="${s.telefono}"></td>
        <td th:text="${s.correoElectronico}"></td>
        <td class="text-end">
          <a class="btn btn-sm btn-outline-primary" th:href="@{|/admin/socios/${s.id}|}">Ver</a>
          <a class="btn btn-sm btn-outline-primary" th:href="@{|/admin/socios/${s.id}/editar|}">Editar</a>
          <form th:action="@{|/admin/socios/${s.id}/eliminar|}" method="post" class="d-inline">
            <button class="btn btn-sm btn-outline-danger" onclick="return confirm('¿Eliminar?')">Eliminar</button>
          </form>
        </td>
      </tr>
    </tbody>
  </table>
  </div>

  <nav th:if="${totalPaginas > 1}" aria-label="Paginación">
    <ul class="pagination justify-content-center">
      <li class="page-item" th:classappend="${paginaActual == 1} ? 'disabled'">
        <a class="page-link" th:href="@{'/admin/socios?page=' + ${paginaActual - 1}(filtro=${filtro})}">Anterior</a>
      </li>
      <li class="page-item" th:each="i : ${#numbers.sequence(1, totalPaginas)}"
          th:classappend="${i == paginaActual} ? 'active'">
        <a class="page-link" th:text="${i}" th:href="@{'/admin/socios?page=' + ${i}(filtro=${filtro})}">1</a>
      </li>
      <li class="page-item" th:classappend="${paginaActual == totalPaginas} ? 'disabled'">
        <a class="page-link" th:href="@{'/admin/socios?page=' + ${paginaActual + 1}(filtro=${filtro})}">Siguiente</a>
      </li>
    </ul>
  </nav>
</div>
</html>
