<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{::content})}">
<div th:fragment="content">
  <div class="d-flex justify-content-between mb-3">
    <h1 class="h4 m-0">Mensajes</h1>
    <a class="btn btn-primary" th:href="@{/admin/mensajes/nuevo}">Nuevo</a>
  </div>
  <table class="table table-striped">
    <thead><tr><th>TÃ­tulo</th><th>Tipo</th><th>Autor</th><th>Enviados</th><th></th></tr></thead>
    <tbody>
      <tr th:each="m : ${mensajes.content}">
        <td th:text="${m.titulo}"></td>
        <td th:text="${m.tipoMensaje}"></td>
        <td th:text="${m.autorNombre != null ? m.autorNombre : 'Administrador'}"></td>
        <td th:text="${m.cantidadSociosEnviados != null ? m.cantidadSociosEnviados : '-'}"></td>
        <td class="text-end">
          <a class="btn btn-sm btn-outline-primary" th:href="@{|/admin/mensajes/${m.id}|}">Ver</a>
          <a class="btn btn-sm btn-success" th:href="@{|/admin/mensajes/${m.id}/enviar|}"
             th:text="${m.tipoMensaje == T(com.projects.gym.gym_app.domain.enums.TipoMensaje).INDIVIDUAL ? 'Enviar a socio' : 'Enviar a grupo'}"></a>
        </td>
      </tr>
    </tbody>
  </table>
</div></html>
